## REST Service url_shortcut

#### Сервис сокращения ссылок.

После регистрации, пользователь может отправлять ссылки,
и получать код, соответвующий отправленной ссылке.
И далее использовать этот код для перехода по ссылке.

#### Стэк технологий:

- PostgreSQL
- Spring Boot
- Spring REST
- Spring Security, JWT

#### Для запуска требуется:

- Java 17
- Maven
- PostgreSQL

#### Порядок запуска:

1. Создать базу данных

````
CREATE DATABASE url_shortcut
````

2. Запустить проект

````
mvn spring-boot:run
````

#### Инструкция по использованию:

1. Регистрация сайта:

````
POST /registration
````

C телом JSON объекта:

````
{site : "example.com"}
````

Ответ от сервера:

````
{registration : true/false, login: УНИКАЛЬНЫЙ_КОД, password : УНИКАЛЬНЫЙ_КОД}
````

Флаг registration указывает, что регистрация выполнена или нет, то есть сайт уже есть в системе.

2. Авторизация.

````
POST /login
````

С телом JSON объекта:

````
{login: УНИКАЛЬНЫЙ_КОД, password: УНИКАЛЬНЫЙ_КОД}
````

В ответе сервера в headers содержится токен:

````
Authorization: Bearer e25d31c5-db66-4cf2-85d4-8faa8c544ad6
````

3. Регистрация URL

После регистрации можно отправлять ссылки и получать преобразованные ссылки в ответ.

````
POST /convert
````

C телом JSON объекта:

````
{url: "https://example.com/xyz/123"}
````

Ответ от сервера:

````
{code: УНИКАЛЬНЫЙ_КОД}
````

4. Переадресация. Выполняется без авторизации.

В запросе отправляется код, в ответе возвращается ассоциированная ссылка.

````
GET /redirect/УНИКАЛЬНЫЙ_КОД
````

Ответ от сервера в заголовке:

````
HTTP CODE - 302 REDIRECT URL
````

5. Статистика.

В сервисе считается количество вызовов каждого адреса.
По сайту можно получить список всех ссылок, и количество вызовов каждой ссылки:

````
GET /statistic
````

Ответ от сервера JSON:

````
[
    {url : "https://example.com/xyz/123", total : 0},
    {url : "https://example.com/abc/789", total : 56}
]
````
